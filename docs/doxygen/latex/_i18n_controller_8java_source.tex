\doxysection{I18n\+Controller.\+java}
\hypertarget{_i18n_controller_8java_source}{}\label{_i18n_controller_8java_source}\index{src/main/java/com/deusto/deuspotify/controllers/I18nController.java@{src/main/java/com/deusto/deuspotify/controllers/I18nController.java}}
\mbox{\hyperlink{_i18n_controller_8java}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{_i18n_controller_8java_source_l00001}00001\ }
\DoxyCodeLine{\Hypertarget{_i18n_controller_8java_source_l00006}00006\ \textcolor{keyword}{package\ }com.deusto.deuspotify.controllers;}
\DoxyCodeLine{\Hypertarget{_i18n_controller_8java_source_l00007}00007\ }
\DoxyCodeLine{\Hypertarget{_i18n_controller_8java_source_l00008}00008\ \textcolor{keyword}{import}\ org.springframework.beans.factory.annotation.Value;}
\DoxyCodeLine{\Hypertarget{_i18n_controller_8java_source_l00009}00009\ \textcolor{keyword}{import}\ org.springframework.context.MessageSource;}
\DoxyCodeLine{\Hypertarget{_i18n_controller_8java_source_l00010}00010\ \textcolor{keyword}{import}\ org.springframework.core.io.Resource;}
\DoxyCodeLine{\Hypertarget{_i18n_controller_8java_source_l00011}00011\ \textcolor{keyword}{import}\ org.springframework.web.bind.annotation.GetMapping;}
\DoxyCodeLine{\Hypertarget{_i18n_controller_8java_source_l00012}00012\ \textcolor{keyword}{import}\ org.springframework.web.bind.annotation.RestController;}
\DoxyCodeLine{\Hypertarget{_i18n_controller_8java_source_l00013}00013\ \textcolor{keyword}{import}\ org.springframework.web.bind.annotation.RequestParam;}
\DoxyCodeLine{\Hypertarget{_i18n_controller_8java_source_l00014}00014\ }
\DoxyCodeLine{\Hypertarget{_i18n_controller_8java_source_l00015}00015\ \textcolor{keyword}{import}\ java.io.IOException;}
\DoxyCodeLine{\Hypertarget{_i18n_controller_8java_source_l00016}00016\ \textcolor{keyword}{import}\ java.util.*;}
\DoxyCodeLine{\Hypertarget{_i18n_controller_8java_source_l00017}00017\ \textcolor{keyword}{import}\ java.util.stream.Collectors;}
\DoxyCodeLine{\Hypertarget{_i18n_controller_8java_source_l00018}00018\ \textcolor{keyword}{import}\ java.io.InputStreamReader;}
\DoxyCodeLine{\Hypertarget{_i18n_controller_8java_source_l00019}00019\ \textcolor{keyword}{import}\ java.io.Reader;}
\DoxyCodeLine{\Hypertarget{_i18n_controller_8java_source_l00020}00020\ }
\DoxyCodeLine{\Hypertarget{_i18n_controller_8java_source_l00025}00025\ @RestController}
\DoxyCodeLine{\Hypertarget{_i18n_controller_8java_source_l00026}\mbox{\hyperlink{classcom_1_1deusto_1_1deuspotify_1_1controllers_1_1_i18n_controller}{00026}}\ \textcolor{keyword}{public}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classcom_1_1deusto_1_1deuspotify_1_1controllers_1_1_i18n_controller}{I18nController}}\ \{}
\DoxyCodeLine{\Hypertarget{_i18n_controller_8java_source_l00027}00027\ }
\DoxyCodeLine{\Hypertarget{_i18n_controller_8java_source_l00028}00028\ \ \ \ \ \textcolor{keyword}{private}\ \textcolor{keyword}{final}\ MessageSource\ messageSource;}
\DoxyCodeLine{\Hypertarget{_i18n_controller_8java_source_l00029}00029\ }
\DoxyCodeLine{\Hypertarget{_i18n_controller_8java_source_l00030}00030\ \ \ \ \ @Value(\textcolor{stringliteral}{"{}classpath:messages.properties"{}})}
\DoxyCodeLine{\Hypertarget{_i18n_controller_8java_source_l00031}00031\ \ \ \ \ \textcolor{keyword}{private}\ Resource\ messagesProperties;}
\DoxyCodeLine{\Hypertarget{_i18n_controller_8java_source_l00032}00032\ }
\DoxyCodeLine{\Hypertarget{_i18n_controller_8java_source_l00033}00033\ \ \ \ \ @Value(\textcolor{stringliteral}{"{}classpath:messages\_es.properties"{}})}
\DoxyCodeLine{\Hypertarget{_i18n_controller_8java_source_l00034}00034\ \ \ \ \ \textcolor{keyword}{private}\ Resource\ messagesEsProperties;}
\DoxyCodeLine{\Hypertarget{_i18n_controller_8java_source_l00035}00035\ }
\DoxyCodeLine{\Hypertarget{_i18n_controller_8java_source_l00036}00036\ \ \ \ \ @Value(\textcolor{stringliteral}{"{}classpath:messages\_en.properties"{}})}
\DoxyCodeLine{\Hypertarget{_i18n_controller_8java_source_l00037}00037\ \ \ \ \ \textcolor{keyword}{private}\ Resource\ messagesEnProperties;}
\DoxyCodeLine{\Hypertarget{_i18n_controller_8java_source_l00038}00038\ }
\DoxyCodeLine{\Hypertarget{_i18n_controller_8java_source_l00039}00039\ \ \ \ \ @Value(\textcolor{stringliteral}{"{}classpath:messages\_eu.properties"{}})}
\DoxyCodeLine{\Hypertarget{_i18n_controller_8java_source_l00040}00040\ \ \ \ \ \textcolor{keyword}{private}\ Resource\ messagesEuProperties;}
\DoxyCodeLine{\Hypertarget{_i18n_controller_8java_source_l00041}00041\ }
\DoxyCodeLine{\Hypertarget{_i18n_controller_8java_source_l00046}\mbox{\hyperlink{classcom_1_1deusto_1_1deuspotify_1_1controllers_1_1_i18n_controller_a98395c12cb003c8ec087d335e262a113}{00046}}\ \ \ \ \ \textcolor{keyword}{public}\ \mbox{\hyperlink{classcom_1_1deusto_1_1deuspotify_1_1controllers_1_1_i18n_controller_a98395c12cb003c8ec087d335e262a113}{I18nController}}(MessageSource\ messageSource)\ \{}
\DoxyCodeLine{\Hypertarget{_i18n_controller_8java_source_l00047}00047\ \ \ \ \ \ \ \ \ this.messageSource\ =\ messageSource;}
\DoxyCodeLine{\Hypertarget{_i18n_controller_8java_source_l00048}00048\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_i18n_controller_8java_source_l00049}00049\ }
\DoxyCodeLine{\Hypertarget{_i18n_controller_8java_source_l00056}00056\ \ \ \ \ @GetMapping(\textcolor{stringliteral}{"{}/api/i18n"{}})}
\DoxyCodeLine{\Hypertarget{_i18n_controller_8java_source_l00057}\mbox{\hyperlink{classcom_1_1deusto_1_1deuspotify_1_1controllers_1_1_i18n_controller_a2508f2c3c5582a01647c84c24225ca93}{00057}}\ \ \ \ \ public\ Map<String,\ String>\ \mbox{\hyperlink{classcom_1_1deusto_1_1deuspotify_1_1controllers_1_1_i18n_controller_a2508f2c3c5582a01647c84c24225ca93}{getTranslations}}(@RequestParam(value\ =\ "{}lang"{},\ required\ =\ false)\ String\ lang)\ throws\ IOException\ \{}
\DoxyCodeLine{\Hypertarget{_i18n_controller_8java_source_l00058}00058\ \ \ \ \ \ \ \ \ Locale\ locale\ =\ \textcolor{keywordflow}{switch}\ (lang\ !=\ \textcolor{keyword}{null}\ ?\ lang\ :\ \textcolor{stringliteral}{"{}es"{}})\ \{}
\DoxyCodeLine{\Hypertarget{_i18n_controller_8java_source_l00059}00059\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{stringliteral}{"{}en"{}}\ -\/>\ Locale.ENGLISH;}
\DoxyCodeLine{\Hypertarget{_i18n_controller_8java_source_l00060}00060\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{stringliteral}{"{}eu"{}}\ -\/>\ \textcolor{keyword}{new}\ Locale(\textcolor{stringliteral}{"{}eu"{}});}
\DoxyCodeLine{\Hypertarget{_i18n_controller_8java_source_l00061}00061\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{default}\ -\/>\ \textcolor{keyword}{new}\ Locale(\textcolor{stringliteral}{"{}es"{}});}
\DoxyCodeLine{\Hypertarget{_i18n_controller_8java_source_l00062}00062\ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{\Hypertarget{_i18n_controller_8java_source_l00063}00063\ }
\DoxyCodeLine{\Hypertarget{_i18n_controller_8java_source_l00064}00064\ \ \ \ \ \ \ \ \ Map<String,\ String>\ allKeys\ =\ loadAllPropertiesKeys();}
\DoxyCodeLine{\Hypertarget{_i18n_controller_8java_source_l00065}00065\ }
\DoxyCodeLine{\Hypertarget{_i18n_controller_8java_source_l00066}00066\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ allKeys.entrySet().stream()}
\DoxyCodeLine{\Hypertarget{_i18n_controller_8java_source_l00067}00067\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ .collect(Collectors.toMap(}
\DoxyCodeLine{\Hypertarget{_i18n_controller_8java_source_l00068}00068\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Map.Entry::getKey,}
\DoxyCodeLine{\Hypertarget{_i18n_controller_8java_source_l00069}00069\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ entry\ -\/>\ messageSource.getMessage(entry.getKey(),\ \textcolor{keyword}{null},\ locale)}
\DoxyCodeLine{\Hypertarget{_i18n_controller_8java_source_l00070}00070\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ));}
\DoxyCodeLine{\Hypertarget{_i18n_controller_8java_source_l00071}00071\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_i18n_controller_8java_source_l00072}00072\ }
\DoxyCodeLine{\Hypertarget{_i18n_controller_8java_source_l00078}00078\ \ \ \ \ \textcolor{keyword}{private}\ Map<String,\ String>\ loadAllPropertiesKeys()\ throws\ IOException\ \{}
\DoxyCodeLine{\Hypertarget{_i18n_controller_8java_source_l00079}00079\ \ \ \ \ \ \ \ \ Map<String,\ String>\ keys\ =\ \textcolor{keyword}{new}\ HashMap<>();}
\DoxyCodeLine{\Hypertarget{_i18n_controller_8java_source_l00080}00080\ \ \ \ \ \ \ \ \ keys.putAll(loadPropertiesKeys(messagesProperties));}
\DoxyCodeLine{\Hypertarget{_i18n_controller_8java_source_l00081}00081\ \ \ \ \ \ \ \ \ keys.putAll(loadPropertiesKeys(messagesEsProperties));}
\DoxyCodeLine{\Hypertarget{_i18n_controller_8java_source_l00082}00082\ \ \ \ \ \ \ \ \ keys.putAll(loadPropertiesKeys(messagesEnProperties));}
\DoxyCodeLine{\Hypertarget{_i18n_controller_8java_source_l00083}00083\ \ \ \ \ \ \ \ \ keys.putAll(loadPropertiesKeys(messagesEuProperties));}
\DoxyCodeLine{\Hypertarget{_i18n_controller_8java_source_l00084}00084\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ keys;}
\DoxyCodeLine{\Hypertarget{_i18n_controller_8java_source_l00085}00085\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_i18n_controller_8java_source_l00086}00086\ }
\DoxyCodeLine{\Hypertarget{_i18n_controller_8java_source_l00093}00093\ \ \ \ \ \textcolor{keyword}{private}\ Map<String,\ String>\ loadPropertiesKeys(Resource\ resource)\ \textcolor{keywordflow}{throws}\ IOException\ \{}
\DoxyCodeLine{\Hypertarget{_i18n_controller_8java_source_l00094}00094\ \ \ \ \ \ \ \ \ Map<String,\ String>\ keys\ =\ \textcolor{keyword}{new}\ HashMap<>();}
\DoxyCodeLine{\Hypertarget{_i18n_controller_8java_source_l00095}00095\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{try}\ (Reader\ reader\ =\ \textcolor{keyword}{new}\ InputStreamReader(resource.getInputStream()))\ \{}
\DoxyCodeLine{\Hypertarget{_i18n_controller_8java_source_l00096}00096\ \ \ \ \ \ \ \ \ \ \ \ \ Properties\ properties\ =\ \textcolor{keyword}{new}\ Properties();}
\DoxyCodeLine{\Hypertarget{_i18n_controller_8java_source_l00097}00097\ \ \ \ \ \ \ \ \ \ \ \ \ properties.load(reader);}
\DoxyCodeLine{\Hypertarget{_i18n_controller_8java_source_l00098}00098\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (String\ key\ :\ properties.stringPropertyNames())\ \{}
\DoxyCodeLine{\Hypertarget{_i18n_controller_8java_source_l00099}00099\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ keys.put(key,\ properties.getProperty(key));}
\DoxyCodeLine{\Hypertarget{_i18n_controller_8java_source_l00100}00100\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_i18n_controller_8java_source_l00101}00101\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_i18n_controller_8java_source_l00102}00102\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ keys;}
\DoxyCodeLine{\Hypertarget{_i18n_controller_8java_source_l00103}00103\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_i18n_controller_8java_source_l00104}00104\ \}}

\end{DoxyCode}
